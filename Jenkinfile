pipeline {
    agent any

    stages {
        stage('Build and Push Dev') {
            when {
                branch 'dev' // Trigger only on dev branch
            }
            steps {
                script {
                    // Build and push Docker image to dev repository
                    docker.build('my-dev-image:latest').push('dev-repo/my-dev-image:latest')
                }
            }
        }
        stage('Build and Push Prod') {
            when {
                branch 'master' // Trigger only on master branch
            }
            steps {
                script {
                    // Build and push Docker image to prod repository
                    docker.build('my-prod-image:latest').push('prod-repo/my-prod-image:latest')
                }
            }
        }
    }
}

